%%{init: {'theme':'base', 'themeVariables': {'primaryColor':'#ffffff', 'primaryTextColor':'#000000', 'primaryBorderColor':'#000000', 'lineColor':'#000000', 'secondaryColor':'#f9f9f9', 'tertiaryColor':'#ffffff', 'background':'#ffffff', 'mainBkg':'#ffffff', 'secondBkg':'#f9f9f9'}}}%%
erDiagram
    USER {
        string userId PK "Cognito Sub ID"
        string email UK "User email address"
        string name "Full name"
        string profilePicture "S3 URL for profile image"
        string timezone "User timezone (e.g., America/New_York)"
        string locale "Language locale (e.g., en-US, es-ES)"
        boolean isActive "Account status"
        string createdAt "Account creation timestamp"
        string updatedAt "Last profile update"
        string lastLoginAt "Last login timestamp"
        json preferences "User preferences and settings"
        json subscriptionInfo "Premium features and billing"
    }

    BABY {
        string babyId PK "Unique baby identifier"
        string userId FK "Owner user ID"
        string name "Baby's name"
        string profilePicture "S3 URL for baby photo"
        string dateOfBirth "Birth date (YYYY-MM-DD)"
        string gender "male, female, other"
        boolean premature "Was baby premature"
        number gestationalWeek "Gestational week if premature"
        number birthWeight "Birth weight in kg"
        number birthHeight "Birth height in cm"
        boolean isActive "Baby profile status"
        json medicalInfo "Allergies, conditions, medications"
        json milestones "Development milestones tracking"
        string createdAt "Baby registration timestamp"
        string updatedAt "Last baby info update"
    }

    GROWTH_DATA {
        string dataId PK "Unique measurement ID"
        string babyId FK "Baby identifier"
        string userId FK "Owner user ID (for validation)"
        string measurementDate "Date of measurement (YYYY-MM-DD)"
        string measurementType "weight, height, head_circumference, bmi"
        number value "Measurement value"
        string unit "Measurement unit (kg, cm, etc)"
        number percentile "WHO percentile (0-100)"
        number zscore "WHO Z-score"
        string measurementSource "manual, pediatrician, device"
        json deviceInfo "Smart scale/device metadata"
        string notes "Optional notes from parent"
        boolean isEstimated "If measurement was estimated"
        string createdAt "Measurement entry timestamp"
        string updatedAt "Last update timestamp"
    }

    VACCINATION {
        string vaccinationId PK "Unique vaccination ID"
        string babyId FK "Baby identifier" 
        string userId FK "Owner user ID"
        string vaccineName "Vaccine name"
        string vaccineCode "Standard vaccine code"
        string dateAdministered "Date given (YYYY-MM-DD)"
        string nextDueDate "Next dose due date"
        string provider "Healthcare provider"
        string batchNumber "Vaccine batch number"
        json reactions "Any adverse reactions"
        string notes "Additional notes"
        string createdAt "Record creation timestamp"
    }

    MILESTONE {
        string milestoneId PK "Unique milestone ID"
        string babyId FK "Baby identifier"
        string userId FK "Owner user ID"
        string milestoneType "physical, cognitive, social, language"
        string name "Milestone name"
        string description "Milestone description"
        string achievedDate "Date achieved (YYYY-MM-DD)"
        number expectedAgeMonths "Expected age in months"
        number actualAgeMonths "Actual age when achieved"
        boolean isCustom "User-created milestone"
        string notes "Parent notes"
        string createdAt "Record creation timestamp"
    }

    USER ||--o{ BABY : "owns"
    BABY ||--o{ GROWTH_DATA : "has measurements"
    BABY ||--o{ VACCINATION : "has vaccinations"
    BABY ||--o{ MILESTONE : "has milestones"
    USER ||--o{ GROWTH_DATA : "creates"
    USER ||--o{ VACCINATION : "records"
    USER ||--o{ MILESTONE : "tracks"